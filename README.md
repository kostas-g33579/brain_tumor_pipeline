# Brain Tumor Classification via Radiomics

**MSc Thesis — Kostas Plomariou, AUTH Biomedical Engineering**

> Optimising the Brain Tumor Classification Pipeline: From Systematic Medical Image Preprocessing and Radiomics Engineering to Enhanced ML Classification Models

---

## Overview

Binary classification of brain tumors — **Glioma vs Meningioma** — using radiomics features extracted from multi-parametric MRI (mpMRI). The pipeline is built on two BraTS 2023 datasets and follows a systematic modality-incremental approach: T1 → T1c → T2 → FLAIR.

| Dataset | Tumor Type | Cases | Modalities | Segmentation |
|---------|-----------|-------|------------|-------------|
| BraTS 2023 GLI | Glioma (pre-treatment) | ~2,040 | T1, T1c, T2, FLAIR | ET / NETC / SNFH |
| BraTS 2023 MEN | Meningioma (pre-operative) | ~1,141 | T1, T1c, T2, FLAIR | ET / NET / SNFH |

---

## Pipeline Stages

```
01_build_master_index.py   →   master_index.csv
02_preprocess.py           →   normalized NIfTI files
03_extract_features.py     →   PyRadiomics feature CSVs
04_inspect_features.py     →   features_clean.csv
05_combat.R                →   harmonized_features.csv  [coming]
06_classify.py             →   classification results    [coming]
```

---

## Setup

### Requirements
- Python 3.10+
- Conda (recommended)

### Installation

```bash
git clone https://github.com/YOUR_USERNAME/brain-tumor-classification.git
cd brain-tumor-classification
conda create -n btc python=3.10 -y
conda activate btc
pip install -r requirements.txt
```

### Dataset Layout

The datasets are **not included** in this repository. Download from Synapse:
- GLI: https://www.synapse.org/Synapse:syn51514105
- MEN: https://www.synapse.org/Synapse:syn51514106

Organise under a parent `thesis/` folder in Documents:
```
Documents/thesis/
├── brain_tumor_classification/    ← this repo
├── thesis_data/
│   ├── GLI/
│   │   ├── training/              ← extract GLI training zip here
│   │   ├── validation/            ← extract GLI validation zip here
│   │   └── BraTS2023_2017_GLI_Mapping.xlsx
│   └── MEN/
│       ├── training/              ← extract MEN training zip here
│       ├── validation/            ← extract MEN validation zip here
│       └── Meningioma_supplementary_clinical_data_and_imaging_parameters_for_training_and_validation_sets.xlsx
└── thesis_outputs/                ← generated by pipeline (gitignored)
```

Paths are pre-configured in `config/config.yaml` for `C:/Users/kplom/Documents/thesis/`.
biowin paths are included as commented-out block — just swap the active section when on the lab PC.

---

## Running

```bash
# 1. Build master index (dry run first)
python scripts/01_build_master_index.py --config config/config.yaml --dry-run
python scripts/01_build_master_index.py --config config/config.yaml

# 2. Preprocess (test one case first)
python scripts/02_preprocess.py --config config/config.yaml --case BraTS-GLI-00000-000
python scripts/02_preprocess.py --config config/config.yaml

# 3. Extract features
python scripts/03_extract_features.py --config config/config.yaml --case BraTS-GLI-00000-000
python scripts/03_extract_features.py --config config/config.yaml

# 4. Inspect and clean feature matrix
python scripts/04_inspect_features.py --config config/config.yaml
```

---

## Adding the Next Modality

When T1 is validated, open `config/config.yaml` and flip `t1c` to `true`:
```yaml
modalities:
  t1:    true
  t1c:   true   # ← enable
  t2:    false
  flair: false
```
Re-run Steps 2–4. The pipeline appends T1c features to the existing matrix automatically.

---

## Expected Feature Count

| Modality | Features/case |
|----------|--------------|
| T1       | ~93          |
| T1 + T1c | ~186         |
| + T2     | ~279         |
| + FLAIR  | ~372         |

Feature classes: First Order, Shape, GLCM, GLRLM, GLSZM, NGTDM

---

## Environments

| Machine | Config section | GPU |
|---------|---------------|-----|
| Local PC (kplom) | `paths` block (active) | — |
| biowin lab PC | `paths` block (commented) | RTX 3090 |
| AUTH HPC (aristotle) | TBD | 8× A100 |

---

## License

Academic use only. Dataset citations required per BraTS 2023 challenge terms.
